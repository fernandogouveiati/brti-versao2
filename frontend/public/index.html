<!DOCTYPE html>
<html lang="en">
        <head>
                <title>ConectaPlus - BRTI</title>
                <link
                        rel="stylesheet"
                        href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
                />
                <link rel="apple-touch-icon" href="%PUBLIC_URL%/apple-touch-icon.png" />
                <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
                <link rel=”shortcut icon” href=”%PUBLIC_URL%/favicon.ico”>
                <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
                <meta name="theme-color" content="#000000" />
                <meta
                        name="viewport"
                        content="minimum-scale=1, initial-scale=1, width=device-width"
                />
                <!-- Issue workaround for React v16. -->
                <script>
                        // See https://github.com/facebook/react/issues/20829#issuecomment-802088260
                        if (!crossOriginIsolated) SharedArrayBuffer = ArrayBuffer;
                </script>
        </head>
        <body>
                <noscript>Você precisa habilitar o JavaScript para executar este aplicativo.</noscript>
                <div id="root"></div>

		<body style="background-color:#3e5f3a">
		<!-- Botão de instalação que ficará oculto até o momento correto -->
		<center><button id="install-button" style="display:none;">Instalar no Celular</button></center>
		</body>		    

		<!-- Scripts JS -->
		<script>
			 let deferredPrompt; // variável que vai armazenar o evento `beforeinstallprompt`

		         // Ouve o evento 'beforeinstallprompt'
		         window.addEventListener('beforeinstallprompt', (e) => {
        	         // Impede o comportamento automático do navegador
		         e.preventDefault();
	                 // Armazena o evento para que possamos usá-lo depois
        	         deferredPrompt = e;

            		// Exibe o botão de instalação
            		const installButton = document.getElementById('install-button');
            		installButton.style.display = 'block'; // Torna o botão visível
        		});

        		// Quando o botão de instalação for clicado
        		document.getElementById('install-button').addEventListener('click', (e) => {
            		// Dispara a instalação quando o botão é clicado
            		if (deferredPrompt) {
                	deferredPrompt.prompt(); // Mostra a solicitação de instalação
                	deferredPrompt.userChoice.then((choiceResult) => {
                    		if (choiceResult.outcome === 'accepted') {
                        		console.log('Usuário aceitou a instalação');
                    		} else {
                        		console.log('Usuário recusou a instalação');
                    		}
                    	deferredPrompt = null; // Reseta o evento após a escolha do usuário
                	});
            		}
        		});
		</script>


        </body>
</html>
